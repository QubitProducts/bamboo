# circle.yml
machine:
  ruby:
    version: 2.1.1
  environment:
    FOO: up
    BAMBOO_PROJECT_DIR: /home/ubuntu/bamboo
    WORKSPACE: /home/ubuntu/bamboo
    TEST_OUTPUT: /home/unbuntu/bamboo/test_output

dependencies:
  pre:
    - gem install fpm --pre
    - go get github.com/tools/godep
    - go get bitbucket.org/tebeka/go2xunit
    - go get -t github.com/smartystreets/goconvey

test:
  pre:
  override:
    - mkdir -p  $WORKSPACE/test_output
    - go test -v github.com/QubitProducts/bamboo/... | go2xunit > $TEST_OUTPUT/tests.xml
